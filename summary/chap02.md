# Chapter 02 리팩토링 개론

## 리팩토링은 무엇인가
### 정의
1. 겉으로 드러나는 기능은 그래로 둔 채, 알아보기 쉽고 수정하기 간편하게 소프트웨어 내부를 수정하는 작업 
2. 리팩토링 기법을 연달아 적용해서 겉으로 드러나는 기능은 그대로 둔 채 소프트웨어 구조를 변경한다. 

### 정의에서 강조하는 내용
1. 리팩토링의 목적: 소프트웨어를 이해하기, 수정하기 쉽게 만드는 것이다.
2. 소프트웨어 기능에 영향을 주지 않는다.
   - 켄트 벡 '모자 두 개'
     - '리팩토링'과 '기능 추가' : 한번에 하나의 작업만 하기

## 리팩토링은 왜 해야 하나  
- 소프트웨어 설계 개선
  - 리팩토링을 하지 않으면 프로그램 설계는 점점 노후된다. 
  - 코드의 처음 설계 구조를 유지하려면 정기적으로 리팩토링을 실시해야 한다. 
- 소프트웨어 이해도 향상
  - 리팩토링은 제대로 실행되지만 구조가 완전하지 못한 코드에 대해 실시하는 것이다.
  - 프로그래밍에서 가장 중요한 것은 의도한 바를 정확히 전달하는 것이다.  
- 버그 발견 용이
  - 프로그램 구조를 명료하게 만들어서 내가 특정한 전제들이 확실해지면 버그를 놓치는 것이 불가능할 정도가 된다.   
- 프로그래밍 속도 향상
  - 깔끔한 설계는 소프트웨어 개발 속도를 적절히 유지하는 데 꼭 필요하다. 

## 리팩토링은 어떨 때 필요한가
- **일상적으로 틈틈히 해야한다.**
- 같은 작업의 삼진 아웃 때
- 기능을 추가할 때 
- 버그를 수정할 때 
- 코드를 검수할 때 

> **리팩토링의 효용성**  
> 프로그램이 지닌 가치는 두 종류다.  
> 하나는 현재의 기능이라는 가치, 또 하나는 미래의 기능이라는 가치다.  
> 프로그램의 현재 기능은 그저 일부에 불과하다는 사실을 깨우치지 않으면 개발자로서 오래 가지 못한다.   

## 리팩토링 관련 문제들  
- 데이터베이스
- 인터페이스 변경 
  - 인터페이스를 건드리지 않고 내부의 구현 코드를 수정할 수 있다는 것이 객체의 장점 중 하나
  - 상당수의 리팩토링이 인터페이스를 수정한다는 것
  - published 인터페이스 (공개되어 호출 부분을 찾기 어려운)를 호출하는 경우
    - 기존 인터페이스와 새 인터페이스르 모두 유지
    - 꼭 필요한 경우에만 published 타입으로 만드는 것이 좋다.
- 리팩토링을 어렵게 하는 설계를 수정하는 일
  - 거의 모든 경우는 리팩토링으로 해결된다.
- 리팩토링하면 안 되는 상황
  - 코드가 돌아가지 않아서 새로 작성해야 할 때
  - 납기가 임박했을 때